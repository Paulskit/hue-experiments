[
	{
		"desc": "when it's dark, no lights on and motion detected, set a presence=true"
	},
	{
		"name": "OnMotionDetected",
		"conditions": [
			{
				"address": "/sensors/6/state/presence",
				"operator": "eq",
				"value": "true"
			},
			{
				"address": "/sensors/7/state/dark",
				"operator": "eq",
				"value": "true"
			},
			{
				"address": "/groups/2/state/any_on",
				"operator": "eq",
				"value": "false"
			}
		],
		"actions": [
			{
				"address": "/sensors/78/state",
				"method": "PUT",
				"body": {
					"presence": true
				}
			}
		]
	},
	{
		"desc": "when no motion for 1 minute and presence=true, set presence=false"
	},
	{
		"name": "OnNoMotion",
		"conditions": [
			{
				"address": "/sensors/6/state/presence",
				"operator": "eq",
				"value": "false"
			},
			{
				"address": "/sensors/6/state/lastupdated",
				"operator": "ddx",
				"value": "PT00:01:00"
			},
			{
				"address": "/sensors/78/state/presence",
				"operator": "eq",
				"value": "true"
			}
		],
		"actions": [
			{
				"address": "/sensors/78/state",
				"method": "PUT",
				"body": {
					"presence": false
				}
			}
		]
	},
	{
		"desc": "when dark=false and presence=true, set presence=false"
	},
	{
		"name": "OnTooMuchLight",
		"conditions": [
			{
				"address": "/sensors/7/state/dark",
				"operator": "eq",
				"value": "false"
			},
			{
				"address": "/sensors/7/state/lastupdated",
				"operator": "ddx",
				"value": "PT00:01:00"
			}
		],
		"actions": [
			{
				"address": "/sensors/78/state",
				"method": "PUT",
				"body": {
					"presence": false
				}
			}
		]
	},
	{
		"desc": "When Presence changed to true - run motion scene"
	},
	{
		"name": "OnPresenceTrueChange",
		"conditions": [
			{
				"address": "/sensors/78/state/presence",
				"operator": "eq",
				"value": "true"
			},
			{
				"address": "/sensors/78/state/presence",
				"operator": "dx"
			}
		],
		"actions": [
			{
				"address": "/scenes/L4vUERCGxBQMCHX",
				"method": "PUT",
				"body": {
					"storelightstate": true
				}
			},
			{
				"address": "/groups/2/action",
				"method": "PUT",
				"body": {
					"scene": "fVJTc2sK4aaAnul"
				}
			}
		]
	},
	{
		"desc": "When Presence changed to false - recover previous state"
	},
	{
		"name": "OnPresenseFalseChange",
		"conditions": [
			{
				"address": "/sensors/78/state/presence",
				"operator": "eq",
				"value": "false"
			},
			{
				"address": "/sensors/78/state/presence",
				"operator": "dx"
			}
		],
		"actions": [
			{
				"address": "/groups/2/action",
				"method": "PUT",
				"body": {
					"scene": "L4vUERCGxBQMCHX",
					"transitiontime": 0
				}
			}
		]
	}
]